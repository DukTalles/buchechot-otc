<!DOCTYPE html>
<html>
<head>
    <title>NPC Shop Button Generator (108x40)</title>
    <style>
        body {
            background: #1a1a1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            font-family: Arial, sans-serif;
            color: white;
        }
        .preview {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px;
            align-items: center;
        }
        .preview-box {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        canvas {
            border: 1px solid #555;
            image-rendering: pixelated;
        }
        button {
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            background: #4a7c4a;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover { background: #5a9c5a; }
        h3 { margin: 5px 0 15px 0; color: #aaa; font-size: 14px; }
        .zoom { margin-top: 20px; }
        .zoom canvas { image-rendering: pixelated; }
        .color-row {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        .color-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .color-item label { font-size: 11px; color: #888; }
        .color-item input { width: 50px; height: 25px; border: none; cursor: pointer; }
        .instructions {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            max-width: 400px;
            text-align: left;
            font-size: 12px;
            color: #aaa;
        }
        .instructions li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>üè™ NPC Shop Button Generator</h1>
    <p style="color:#888;">Tamanho: 108x40 pixels (igual ao Task)</p>
    
    <div class="color-row">
        <div class="color-item">
            <label>Fundo Claro</label>
            <input type="color" id="bgLight" value="#2d4a2d">
        </div>
        <div class="color-item">
            <label>Fundo Escuro</label>
            <input type="color" id="bgDark" value="#1a3a1a">
        </div>
        <div class="color-item">
            <label>Borda</label>
            <input type="color" id="borderColor" value="#4a8a4a">
        </div>
        <div class="color-item">
            <label>Borda Interna</label>
            <input type="color" id="innerBorder" value="#3a6a3a">
        </div>
        <div class="color-item">
            <label>√çcone</label>
            <input type="color" id="iconColor" value="#ffd700">
        </div>
        <div class="color-item">
            <label>Texto</label>
            <input type="color" id="textColor" value="#cccc88">
        </div>
    </div>
    
    <div class="color-row">
        <div class="color-item">
            <label>Texto do Bot√£o</label>
            <input type="text" id="buttonText" value="NPC Shop" style="width: 80px; height: 20px; text-align: center;">
        </div>
    </div>
    
    <button onclick="generate()">üîÑ Gerar</button>
    
    <div class="preview">
        <div class="preview-box">
            <h3>Imagem Final (108x40) - Normal + Pressed</h3>
            <canvas id="mainCanvas" width="108" height="40"></canvas>
        </div>
        
        <div class="preview-box">
            <h3>Preview Separado</h3>
            <div style="display: flex; gap: 20px;">
                <div>
                    <p style="font-size:11px; color:#666; margin:5px;">Normal</p>
                    <canvas id="normalCanvas" width="108" height="20"></canvas>
                </div>
                <div>
                    <p style="font-size:11px; color:#666; margin:5px;">Pressed</p>
                    <canvas id="pressedCanvas" width="108" height="20"></canvas>
                </div>
            </div>
        </div>
        
        <div class="preview-box zoom">
            <h3>Zoom 3x</h3>
            <canvas id="zoomCanvas" width="324" height="120"></canvas>
        </div>
    </div>
    
    <button onclick="download()">üíæ Baixar npcshop_large.png</button>
    
    <div class="instructions">
        <strong>Instru√ß√µes:</strong>
        <ol>
            <li>Ajuste as cores se quiser</li>
            <li>Clique em "Gerar" para atualizar</li>
            <li>Clique em "Baixar" para salvar</li>
            <li>Mova o arquivo para:<br>
            <code style="color:#8f8;">modules/game_npcshop/images/</code></li>
        </ol>
    </div>

    <script>
        function generate() {
            const bgLight = document.getElementById('bgLight').value;
            const bgDark = document.getElementById('bgDark').value;
            const borderColor = document.getElementById('borderColor').value;
            const innerBorder = document.getElementById('innerBorder').value;
            const iconColor = document.getElementById('iconColor').value;
            const textColor = document.getElementById('textColor').value;
            const buttonText = document.getElementById('buttonText').value;
            
            const mainCanvas = document.getElementById('mainCanvas');
            const mainCtx = mainCanvas.getContext('2d');
            mainCtx.imageSmoothingEnabled = false;
            
            // Limpar
            mainCtx.clearRect(0, 0, 108, 40);
            
            // Desenhar estado Normal (y=0)
            drawButton(mainCtx, 0, bgLight, bgDark, borderColor, innerBorder, iconColor, textColor, buttonText, false);
            
            // Desenhar estado Pressed (y=20)
            drawButton(mainCtx, 20, bgLight, bgDark, borderColor, innerBorder, iconColor, textColor, buttonText, true);
            
            // Preview separado
            const normalCanvas = document.getElementById('normalCanvas');
            const normalCtx = normalCanvas.getContext('2d');
            normalCtx.imageSmoothingEnabled = false;
            normalCtx.clearRect(0, 0, 108, 20);
            drawButton(normalCtx, 0, bgLight, bgDark, borderColor, innerBorder, iconColor, textColor, buttonText, false);
            
            const pressedCanvas = document.getElementById('pressedCanvas');
            const pressedCtx = pressedCanvas.getContext('2d');
            pressedCtx.imageSmoothingEnabled = false;
            pressedCtx.clearRect(0, 0, 108, 20);
            drawButton(pressedCtx, 0, bgLight, bgDark, borderColor, innerBorder, iconColor, textColor, buttonText, true);
            
            // Zoom
            const zoomCanvas = document.getElementById('zoomCanvas');
            const zoomCtx = zoomCanvas.getContext('2d');
            zoomCtx.imageSmoothingEnabled = false;
            zoomCtx.clearRect(0, 0, 324, 120);
            zoomCtx.drawImage(mainCanvas, 0, 0, 324, 120);
        }
        
        function drawButton(ctx, y, bgLight, bgDark, borderColor, innerBorder, iconColor, textColor, text, pressed) {
            const w = 108;
            const h = 20;
            
            // Gradiente de fundo
            const grad = ctx.createLinearGradient(0, y, 0, y + h);
            if (pressed) {
                grad.addColorStop(0, darken(bgDark, 15));
                grad.addColorStop(0.5, darken(bgLight, 10));
                grad.addColorStop(1, darken(bgDark, 5));
            } else {
                grad.addColorStop(0, bgLight);
                grad.addColorStop(0.5, bgDark);
                grad.addColorStop(1, darken(bgDark, 10));
            }
            
            // Fundo com borda arredondada
            ctx.fillStyle = grad;
            roundRect(ctx, 1, y + 1, w - 2, h - 2, 3, true, false);
            
            // Borda externa
            ctx.strokeStyle = pressed ? darken(borderColor, 20) : borderColor;
            ctx.lineWidth = 1;
            roundRect(ctx, 0.5, y + 0.5, w - 1, h - 1, 3, false, true);
            
            // Borda interna (highlight no topo)
            if (!pressed) {
                ctx.strokeStyle = lighten(innerBorder, 15);
                ctx.beginPath();
                ctx.moveTo(4, y + 2);
                ctx.lineTo(w - 4, y + 2);
                ctx.stroke();
            }
            
            // Sombra interna (no topo quando pressed)
            if (pressed) {
                ctx.strokeStyle = darken(borderColor, 30);
                ctx.beginPath();
                ctx.moveTo(4, y + 2);
                ctx.lineTo(w - 4, y + 2);
                ctx.stroke();
            }
            
            // √çcone de saco de moedas (lado esquerdo)
            const iconX = 8;
            const iconY = y + 3;
            drawCoinBag(ctx, iconX, iconY, iconColor, pressed);
            
            // Texto
            ctx.fillStyle = pressed ? darken(textColor, 20) : textColor;
            ctx.font = 'bold 10px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            const textX = 60;
            const textY = y + (pressed ? 11 : 10);
            
            // Sombra do texto
            ctx.fillStyle = 'rgba(0,0,0,0.5)';
            ctx.fillText(text, textX + 1, textY + 1);
            
            // Texto principal
            ctx.fillStyle = pressed ? darken(textColor, 20) : textColor;
            ctx.fillText(text, textX, textY);
        }
        
        function drawCoinBag(ctx, x, y, color, pressed) {
            const c = pressed ? darken(color, 20) : color;
            const dark = darken(c, 40);
            const light = lighten(c, 30);
            
            // Corpo do saco
            ctx.fillStyle = c;
            ctx.beginPath();
            ctx.ellipse(x + 7, y + 9, 6, 5, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Topo do saco (amarrado)
            ctx.fillStyle = c;
            ctx.fillRect(x + 4, y + 2, 6, 4);
            
            // La√ßo
            ctx.fillStyle = dark;
            ctx.fillRect(x + 5, y + 5, 4, 2);
            
            // Highlight
            ctx.fillStyle = light;
            ctx.beginPath();
            ctx.ellipse(x + 5, y + 8, 2, 2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // S√≠mbolo $
            ctx.fillStyle = dark;
            ctx.font = 'bold 7px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('$', x + 7, y + 12);
        }
        
        function roundRect(ctx, x, y, w, h, r, fill, stroke) {
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.lineTo(x + w - r, y);
            ctx.quadraticCurveTo(x + w, y, x + w, y + r);
            ctx.lineTo(x + w, y + h - r);
            ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
            ctx.lineTo(x + r, y + h);
            ctx.quadraticCurveTo(x, y + h, x, y + h - r);
            ctx.lineTo(x, y + r);
            ctx.quadraticCurveTo(x, y, x + r, y);
            ctx.closePath();
            if (fill) ctx.fill();
            if (stroke) ctx.stroke();
        }
        
        function darken(hex, amount) {
            return adjustColor(hex, -amount);
        }
        
        function lighten(hex, amount) {
            return adjustColor(hex, amount);
        }
        
        function adjustColor(hex, amount) {
            let r = parseInt(hex.slice(1,3), 16) + amount;
            let g = parseInt(hex.slice(3,5), 16) + amount;
            let b = parseInt(hex.slice(5,7), 16) + amount;
            r = Math.max(0, Math.min(255, r));
            g = Math.max(0, Math.min(255, g));
            b = Math.max(0, Math.min(255, b));
            return '#' + r.toString(16).padStart(2,'0') + g.toString(16).padStart(2,'0') + b.toString(16).padStart(2,'0');
        }
        
        function download() {
            const canvas = document.getElementById('mainCanvas');
            const link = document.createElement('a');
            link.download = 'npcshop_large.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // Gerar ao carregar
        generate();
        
        // Atualizar ao mudar cores
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', generate);
        });
    </script>
</body>
</html>
